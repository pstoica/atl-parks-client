<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta charset="utf-8" />
    <title>Park Find</title>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false" type="text/javascript"></script>
    <script type="text/javascript">
        function ShowPark(id) {
            alert('Show side details for park #' + id);
        }

        function PlotMap(map, name, id, latlongs) {
            var park_plot = [];
            for (var i = 0; i < latlongs.length; i++) {
                park_plot.push(new google.maps.LatLng(latlongs[i][1],latlongs[i][0]));
            }

            // Node
            var randomNode = new google.maps.LatLng(latlongs[0][1], latlongs[0][0]);

            // Construct the polygon
            park_polygon = new google.maps.Polygon({
                paths: park_plot,
                strokeColor: '#C5C87E',
                strokeOpacity: 0.8,
                strokeWeight: 2,
                fillColor: '#C5C87E',
                fillOpacity: 0.35
            });

            park_polygon.setMap(map);

            google.maps.event.addListener(park_polygon, 'click', function() {
                if (park_polygon.fillColor != '#D8662D') {
                    this.setOptions({ fillColor: "#D8662D" });
                }
                else {
                    this.setOptions({ fillColor: "#756E66" });
                }
                ShowPark(id);
            });

            var infowindow = new google.maps.InfoWindow({
                content: name
            });

            var marker = new google.maps.Marker({
                position: randomNode,
                map: map,
                title: name
            });

            google.maps.event.addListener(park_polygon, "mouseover", function() {
                if (park_polygon.fillColor == '#C5C87E') {
                    this.setOptions({ fillColor: "#756E66" });
                }
                infowindow.open(map, marker);
            });

            google.maps.event.addListener(park_polygon, "mouseout", function() {
                if (park_polygon.fillColor == '#756E66') {
                    this.setOptions({ fillColor: "#C5C87E" });
                }
                infowindow.close();
            }); 
   
   
        }

        function getBoundaries() {
            var bounds = map.getBounds();
            var ne = bounds.getNorthEast(); // LatLng of the north-east corner
            var sw = bounds.getSouthWest(); // LatLng of the south-west corder
            var nw = new google.maps.LatLng(ne.lat(), sw.lng());
            var se = new google.maps.LatLng(sw.lat(), ne.lng());

            document.getElementById('bounds').innerHTML = 'NE boundary: ' + ne + '<br />NW boundary: ' + nw + '<br />SE boundary: ' + se + '<br />SW boundary: ' + sw;
        }

        function useMyLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(useGeoLocation);
            } else {
                alert("Geolocation is not supported by this browser."); 
            }
        }

        function useGeoLocation(position) {
            map.setCenter(new google.maps.LatLng(position.coords.latitude, position.coords.longitude));
        }

        var map;

        function PlotParks() {
            // FOR EACH PARK TO SHOW, CALL THIS FUNCTION
            // parameters: map objct, park name, park id, array of lat longs
            // I've plotted Piedmont and Freedom as examples

            PlotMap(map, "Freedom Park", 85, [[33.771306527339, -84.3441026739659],
                [33.7712941227987, -84.3442772851385],
                [33.7712573885472, -84.344466398616],
                [33.7712207388432, -84.3445973006286],
                [33.7711839830973, -84.3448009674356],
                [33.77113515867, -84.3449463965652],
                [33.7710985084574, -84.3450772981856],
                [33.7710116321937, -84.3454132921756],
                [33.7709863797313, -84.3489193635341],
                [33.769054428623, -84.3489273218959],
                [33.7690474793266, -84.3468068120818],
                [33.7691080454217, -84.3466744085893],
                [33.7693396680583, -84.3465423612525],
                [33.7695006632144, -84.3465426976539],
                [33.7695010316973, -84.3462896832422],
                [33.7699950744349, -84.3456039554452],
                [33.7703217822889, -84.3443043838081],
                [33.7703956667811, -84.3436351025939],
                [33.7703957919498, -84.34354778593],
                [33.7703959795886, -84.3434168098537],
                [33.7705418243067, -84.3434171093146],
                [33.7706512080685, -84.3434173339121],
                [33.770760632606, -84.3433884524709],
                [33.7709308057537, -84.3433742492832],
                [33.7711982500643, -84.343331138356],
                [33.7711980416641, -84.3434766692865],
                [33.771246551699, -84.3435495341081],
                [33.7713070916166, -84.3437097426673],
                [33.7713069872168, -84.3437825066038],
                [33.771306527339, -84.3441026739659]]);

            PlotMap(map, "Piedmont Park", 54, [[33.7931717403141, -84.3727066877946],
                [33.792760391509, -84.3730929463568],
                [33.792721317329, -84.373130843044],
                [33.7925248483761, -84.3733228190131],
                [33.7921611826836, -84.3736814165819],
                [33.792063401239, -84.3737755848656],
                [33.7920013261223, -84.3738342116469],
                [33.7919710981121, -84.3738611819326],
                [33.7919269292839, -84.3739012783828],
                [33.7908361680644, -84.3747757510054],
                [33.7899596894432, -84.3754855970222],
                [33.7898862803713, -84.3755518510714],
                [33.789810886327, -84.3756204737672],
                [33.7896481563334, -84.3757909036479],
                [33.7894516610654, -84.3760134477029],
                [33.7891809056687, -84.3763139128188],
                [33.7889290204394, -84.3760437900748],
                [33.7888642653166, -84.3759754807588],
                [33.7888188391923, -84.3759181220078],
                [33.7887700248239, -84.3758457632531],
                [33.7887189776424, -84.3757475006644],
                [33.7884912956733, -84.3755419973974],
                [33.7882362834497, -84.3758668368857],
                [33.788109107106, -84.3756803185475],
                [33.7881061278903, -84.3756809473469],
                [33.7881023798736, -84.3756819273928],
                [33.7880941619429, -84.3756847604176],
                [33.7880830579944, -84.3756906899488],
                [33.7880750143597, -84.3756970847756],
                [33.7880646680221, -84.3757071390518],
                [33.7880562318727, -84.3757190304905],
                [33.7880527016621, -84.3757707936505],
                [33.7880468726061, -84.3758239258788],
                [33.7880395143347, -84.3758770543809],
                [33.7880113456173, -84.3760170220813],
                [33.787977407939, -84.3761331161502],
                [33.7879223395419, -84.3762744154586],
                [33.7878821262754, -84.376360187789],
                [33.7878398177802, -84.3764383786492],
                [33.7877848469393, -84.3765215890344],
                [33.7877235638841, -84.3765972065587],
                [33.7876426490241, -84.3766803155981],
                [33.7875271989915, -84.3767793738042],
                [33.7874342775756, -84.3768582816765],
                [33.7873244595764, -84.3769523016291],
                [33.7872761436413, -84.376992038645],
                [33.7871885323227, -84.3770564242735],
                [33.7871138972015, -84.3771035509832],
                [33.7869426527548, -84.3771893653755],
                [33.7869259592663, -84.3771959029463],
                [33.7869106898937, -84.3772021999546],
                [33.7868935892747, -84.3772084935587],
                [33.7868764759015, -84.3772148637983],
                [33.786860407244, -84.3772203511191],
                [33.7868460556861, -84.3772256288313],
                [33.7868071228264, -84.3772375457318],
                [33.7868002838853, -84.3772396141718],
                [33.7867950906015, -84.3772410689687],
                [33.7867818101697, -84.3772447813616],
                [33.7867727191442, -84.3772472384309],
                [33.786758564941, -84.3772509929566],
                [33.7867462422634, -84.3772540587048],
                [33.7867359674347, -84.3772564783193],
                [33.7867238985988, -84.3772592639279],
                [33.786706696649, -84.3772631168134],
                [33.7867079078397, -84.3772714086556],
                [33.7867084031833, -84.3772770218139],
                [33.7867086101472, -84.3772825478789],
                [33.7867086697526, -84.37728988664],
                [33.7867084449559, -84.3772948080154],
                [33.7867077100981, -84.3773032667885],
                [33.786707196458, -84.3773067879798],
                [33.7867053568893, -84.3773169415613],
                [33.7867029586469, -84.3773258335973],
                [33.7867014085187, -84.3773306988145],
                [33.7867000695781, -84.3773343896794],
                [33.7866981689966, -84.3773390855826],
                [33.7866965505453, -84.3773427757627],
                [33.7866946516818, -84.377346465256],
                [33.7866924712611, -84.3773508246421],
                [33.7866912977803, -84.3773526629007],
                [33.7866848209103, -84.3773634087542],
                [33.7866691908251, -84.3773892672644],
                [33.7866559197305, -84.3774128509164],
                [33.7866520017557, -84.3774204196538],
                [33.7866449246925, -84.3774352058774],
                [33.7866376923015, -84.3774517173062],
                [33.7865769415641, -84.3775974863803],
                [33.7865657205134, -84.3776275562105],
                [33.7865564813984, -84.3776528126415],
                [33.7865494926753, -84.3776818313546],
                [33.7865418392175, -84.3777136095863],
                [33.786534790556, -84.3777528855532],
                [33.7865319590091, -84.3777762884805],
                [33.78652912942, -84.3777980176574],
                [33.7865278357435, -84.3778184558732],
                [33.7865259730562, -84.3779358516158],
                [33.7865259290975, -84.3780362810406],
                [33.7864082404091, -84.3780409429503],
                [33.7862974606792, -84.3780495146401],
                [33.7862117842686, -84.3780599156852],
                [33.786100995443, -84.3780737936226],
                [33.7859887145635, -84.3780965117008],
                [33.7859227583626, -84.3781104673493],
                [33.7858404401683, -84.3781311111959],
                [33.785728041224, -84.3781611554954],
                [33.7855808013545, -84.3782081699563],
                [33.7854604611926, -84.3782552504145],
                [33.7852697041159, -84.3783316464685],
                [33.7851736143866, -84.378371549281],
                [33.7850263408741, -84.378432335053],
                [33.7847558226384, -84.3785539651546],
                [33.7844251676756, -84.3787150117949],
                [33.7841138052402, -84.3788791271786],
                [33.7841082038783, -84.3784573576834],
                [33.7836041683956, -84.3784763211733],
                [33.7836028099686, -84.3782143540651],
                [33.7833337502322, -84.3782169373209],
                [33.7818760011021, -84.3782277272698],
                [33.7818705703857, -84.3760928001574],
                [33.7818701990345, -84.3758987158853],
                [33.7818641198762, -84.3723126653505],
                [33.7818600827456, -84.3712051237599],
                [33.7818600463458, -84.371198797227],
                [33.7818600171037, -84.3711571402236],
                [33.7818543434028, -84.368750304319],
                [33.7822356917293, -84.3690680786886],
                [33.7824967000254, -84.3692855783413],
                [33.7835686323746, -84.3701633875602],
                [33.7838134012693, -84.3703445761099],
                [33.7840469267485, -84.3704851014801],
                [33.7843445092392, -84.3706483562178],
                [33.7845592573876, -84.3707436862096],
                [33.7848267738419, -84.3708481724399],
                [33.7850189452349, -84.3709163582043],
                [33.7850980782384, -84.3709421843145],
                [33.7854247882308, -84.3710355628037],
                [33.7854950597267, -84.3710483572438],
                [33.7855582959089, -84.3710653441643],
                [33.7857480314306, -84.3710994684095],
                [33.7859658838982, -84.371133659632],
                [33.7862118602826, -84.3711637097578],
                [33.7864886738518, -84.371172632859],
                [33.7865500201084, -84.3711727786894],
                [33.786649724122, -84.3711638316411],
                [33.7870370199199, -84.3711372010501],
                [33.7871597437597, -84.3711191245075],
                [33.7873169754214, -84.3711011309986],
                [33.7874205132204, -84.3710921929025],
                [33.7875892462806, -84.3710742255412],
                [33.7880417846948, -84.3710110124407],
                [33.788559764839, -84.3709439747858],
                [33.7887029399941, -84.3709247227295],
                [33.7888502284334, -84.3708907855005],
                [33.7889647744922, -84.3708714642512],
                [33.789087500284, -84.3708521623671],
                [33.7892634087715, -84.370823191105],
                [33.789574304522, -84.3707798450566],
                [33.7897801820025, -84.3707519769582],
                [33.79012378045, -84.3707185047049],
                [33.7903691986361, -84.3706994944584],
                [33.7905778340993, -84.3706657006144],
                [33.7912855269447, -84.3705694125818],
                [33.7915661801829, -84.3705359431978],
                [33.7917096038007, -84.3705206698596],
                [33.791859545414, -84.3705054119186],
                [33.7920551130265, -84.3704902609672],
                [33.7922082947346, -84.3704867211643],
                [33.7923777645409, -84.3704871227594],
                [33.7926058907952, -84.3704915661808],
                [33.7927150819563, -84.3705027321233],
                [33.7929006970352, -84.3705165662843],
                [33.793077352697, -84.3705384149811],
                [33.7932920086247, -84.370573749259],
                [33.7935247036784, -84.3706244517647],
                [33.7935916003446, -84.3706388244428],
                [33.7936653915682, -84.3706523203929],
                [33.7934924775264, -84.3710724874176],
                [33.7934183633274, -84.3712571506234],
                [33.7933397713399, -84.3714444821474],
                [33.7933060805924, -84.3715301243213],
                [33.7932367664435, -84.3717020960922],
                [33.7931621435257, -84.3719112399588],
                [33.7931379735451, -84.3719949120416],
                [33.7931181467488, -84.3720942922242],
                [33.7931048259887, -84.3722224700355],
                [33.7931023927377, -84.3723716060051],
                [33.7931087582681, -84.3724841320101],
                [33.7931369181664, -84.3726281090085],
                [33.7931717403141, -84.372706687794]]);

        }

        function initialize() {
            var myLatLng = new google.maps.LatLng(33.7927150819563, -84.3705027321233);
            var mapOptions = {
                zoom: 14,
                center: myLatLng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

            google.maps.event.addListener(map, 'center_changed', function() { getBoundaries(map); });

            PlotParks();               
        }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width: 800px; height: 600px;"></div>
    <br />
    <div style="border: 1px solid Black; width: 800px;">
        <span id="bounds"></span>&nbsp;
    </div>
    <div>
        <input type="button" value="use my location" onclick="useMyLocation();" />
    </div>
  </body>
</html>

